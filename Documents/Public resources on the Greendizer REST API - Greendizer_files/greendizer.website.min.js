(function(){window.greendizer=window.greendizer||{};var d=window.greendizer;d.website=d.website||{};d.website.base=d.website.base||{};d.website.Context=function(){var a,c=function(){var c=this,a=d.website.getStorageEngineWrapper(window.localStorage),i=$("#login-loader"),k=$("#login,#signup-button"),j=null,f=new d.oauth.BuyerApplication({oAuthClientId:d.website.environment.OAUTH_CLIENT_ID,oAuthRedirectUri:d.website.environment.OAUTH_REDIRECT_URI,oAuthScopes:"read_account"}),m={fr:"Fran\u00e7ais",en:"English"},
g=$(".language-warning"),q=function(){if(!document.referrer)return null;var b=/^([a-z]{2})\//i.exec(d.website.base.stripDomain(document.referrer));return b?b[1]:null},n=function(){j&&window.clearTimeout(j);i.hide()};this.login=function(b){b=b||!1;if(!b&&"anonymous"===a.getItem("status"))return f.authenticate(function(a){a?r(b):c.logout(!0)},!0,!0,!0);l(!1);$("#user-surface").hide();k.hide();j=window.setTimeout(function(){i.show()},250);(function(){var b=window.sessionStorage.getItem(String.format("gd_oauth_{0}_{1}",
"buyers",d.website.environment.OAUTH_CLIENT_ID));b&&(b=JSON.parse(b),b=d.base.hash.sha1(d.dal.dataTypeEnum.BUYERS+b.user_id),(b=window.sessionStorage.getItem(b))&&o({resource:JSON.parse(b),getFullname:function(){return this.resource.firstname+" "+this.resource.lastname},getAvatarURL:function(){return this.resource.avatar}}),b=d.base.hash.sha1(d.dal.dataTypeEnum.COMPANIES+"0"),(b=window.sessionStorage.getItem(b))&&p({resource:JSON.parse(b),getName:function(){return this.resource.name},getLargeLogoURL:function(){return this.resource.largeLogo}}))})();
r(b)};var l=function(b){b?a.setItem("status","anonymous"):a.removeItem("status")};this.isAuthenticated=function(){return f.isAuthenticated()};var r=function(b){l(!1);f.init(function(a,s){a?(f.getUser(function(b){b.changedEventWatchers.add(new d.base.FunctionPointer(o,c));o(b)},function(){c.logout(!0)}),f.getUser().getCompany(function(b){b.changedEventWatchers.add(new d.base.FunctionPointer(p,c));p(b)},function(){$("#user-surface-company-logo").hide()}),window.setInterval(function(){f.getUser().load();
f.getUser().getCompany().load()},12E4),b&&d.showCentral()):(l(!0),c.logout(!0),s||k.attr("disabled","disabled"))},b)};this.logout=function(b){$(".logged-out-only").show();f&&f.reset();n();$("#user-surface").hide();k.show();b?l(!0):(l(!1),window.location.href=String.format("{0}?next={1}",d.website.environment.LOGOUT_URL,window.location.href))};var o=function(b){$(window).trigger("greendizer.website.authenticated");$(".logged-out-only").hide();n();k.hide();$("#user-surface").show();$("#user-surface-name").show().html(b.getFullname());
$("#user-surface-user-avatar").show().attr("src",b.getAvatarURL())},p=function(b){n();k.hide();$(".logged-out-only").hide();$("#user-surface").show();$("#user-surface-company-logo").show().attr("src",b.getLargeLogoURL())},t=function(){if(previousLanguage){var b=$("html").attr("lang");if(previousLanguage&&previousLanguage!==b){var a=d.website.base.stripDomain(window.location.href);if(!document.referrer.endsWith(a)){g.children("img").attr("alt",m[b]).attr("src","/static/images/"+b+"_flag.png");a:switch(previousLanguage){case "fr":b=
"Le contenu de cette section est disponible en anglais uniquement.";break a;default:b="The content of this section is only available in English"}g.children("span").html(b);g.slideDown("slow");window.setTimeout(function(){g.slideUp("slow")},5E3);$("a").each(function(){var b=$(this),a=b.attr("href").substr(0,4);"http"!==a&&"mail"!==a&&(a=b.attr("href"),a="/"===a.charAt(0)?a:"/"+a,b.attr("href","/"+previousLanguage+a))})}}}},u=function(){var b=$("html").attr("lang"),a=$("#language-switcher"),c=function(c,
d){var h=m[c],e=$("<li/>").appendTo(a);c!==b?e=$("<a/>").attr("href",d).attr("rel","alternate").attr("hreflang",c).attr("title",h).appendTo(e):$("<img class='hint'/>").attr("src","/static/images/expand.png").appendTo(e);$("<span>").html(h).appendTo(e);$("<img/>").attr("alt",h).attr("src","/static/images/"+c+"_flag.png").appendTo(e)};$('link[rel="alternate"][hreflang]').each(function(){var b=$(this);c(b.attr("hreflang"),b.attr("href"))});c(b)},v=function(){if(!(window.sessionStorage&&window.sessionStorage.getItem("languageWarning")||
previousLanguage)){var b=(window.navigator.language||window.navigator.userLanguage).split("-")[0],a=$("html").attr("lang");if(!(a===window.navigator.language||b===a||a===window.GREENDIZER_LOCALE)){var a=$("head"),c=a.children(String.format('[rel="alternate"][hreflang="{0}"]',window.navigator.language));c.size()||(c=a.children(String.format('[rel="alternate"][hreflang="{0}"]',b)));c.size()&&(g.css("cursor","pointer"),g.children("img").attr("alt",m[b]).attr("src","/static/images/"+b+"_flag.png"),g.click(function(){window.location.href=
c.attr("href")}).children("span").html(function(){switch(b){case "fr":return"Cliquez ici pour consulter le contenu de cette page en fran\u00e7ais";case "en":return"Click here to visit the english version of this page"}}),window.setTimeout(function(){g.slideDown("slow");window.setTimeout(function(){g.slideUp("slow");window.sessionStorage&&window.sessionStorage.setItem("languageWarning","false")},5E3)},3E3))}}},w=function(){$("input[data-hint]").each(function(){var b=$(this);(!b.val()||b.val()===b.attr("data-hint"))&&
b.addClass("hint").val(b.attr("data-hint"))}).focus(function(){var b=$(this);b.removeClass("suggestion");b.is(".hint")&&b.removeClass("hint").val("")}).blur(function(){var b=$(this);b.val()||b.addClass("hint").val(b.attr("data-hint"))}).keyup(function(b){27==b.which&&(event.preventDefault(),$(this).val("").blur())});$("form").submit(function(){var b=$(this),a=b.find("input[type='submit']");if(a.attr("disabled"))return!1;a.attr("disabled","disabled");b.find("input[type='text']").each(function(){var b=
$(this),a=!b.val()||b.val()===b.attr("data-hint");"true"===b.attr("data-optional")?a&&b.attr("disabled","disabled"):b.toggleClass("invalid",a)});return b.find(".invalid").size()?(b.find("[disabled]").removeAttr("disabled"),!1):!0});$("[data-format]").each(function(){var b=$(this);format=b.attr("data-format");try{if("email"===format.substr(0,5)){var a=b.attr("href").replace("+at+","@");b.attr("href",a);"email"===format&&b.html(a.substring(7))}}catch(c){console.error("Could not reformat field of type"+
format)}})},x=function(){$("a > button").bind("click",function(){window.location.href=$(this).parent().attr("href")})};(function(){previousLanguage=q();if(!1===window.GREENDIZER_PROTECTED)$("#login").show(),window.location.hash="";$(document).bind("ready",function(){t();v();u();var b={csharp:"cs"},a;for(a in b)$(".tab-control ul li[data-name='"+a+"']").remove(),$(".tab-control pre.prettyprint code[class='language-"+b[a]+"']").parent().remove();w();x();$(".tab-control").TabControl();$(".gallery-viewer").Gallery({duration:15E3,
slideshow:!0});$(".pinned-menu").Pinned()})})()};return new function(){this.getInstance=function(){if(!a)a=new c,a.constructor=null;return a}}}();var q=/^http[s]?:\/\/www(.+)?.greendizer.com\//i;d.website.base.stripDomain=function(a){return a.replace(q,"")};d.website.base.stripUnit=function(a){return Number(/\d+/.exec(a))};d.website.getStorageEngineWrapper=function(a){return{engine:a,getItem:function(a){try{return this.engine.getItem(a)}catch(d){}},setItem:function(a,d){try{return this.engine.setItem(a,
d)}catch(e){}},removeItem:function(a){try{return this.engine.removeItem(a)}catch(d){}},clear:function(){try{return this.engine.clear()}catch(a){}}}};d.website.environment={DEBUG:!1,STATIC_URL:"/static/",DEFAULT_URL:"https://www.greendizer.com/",LOGOUT_URL:"https://services.greendizer.com/logout/",OAUTH_CLIENT_ID:"1002",OAUTH_REDIRECT_URI:"https://www.greendizer.com/oauth_callback/"};$.widget("gd.Gallery",{_buttonsDOM:$("<ol class='gallery-controls'/>"),_timerID:void 0,_isSlideshowDisabled:function(){return!self._timerID},
_showItemAt:function(a){this._hideAll();this.element.children("li").eq(a).show();this._buttonsDOM.children("li").eq(a).addClass("focus")},_showNextItem:function(){this._showItemAt((this.element.children("li:visible").index()+1)%(this.element.children().size()-1))},_reset:function(){this._showItemAt(0)},_hideAll:function(){this.element.children("li").hide();this._buttonsDOM.children("li").removeClass("focus")},start:function(){if(this._isSlideshowDisabled()){var a=this;this._timerID=window.setInterval(function(){a._showNextItem()},
this.options.duration);this.options.slideshow=!0}},stop:function(){if(!this._isSlideshowDisabled())window.clearInterval(this._timerID),this._timerID=null,this.options.slideshow=!1},_init:function(){var a=this;this._buttonsDOM.insertBefore(this.element.children(":first"));this.element.children("li").each(function(){$("<li/>").appendTo(a._buttonsDOM).click(function(){var c=$(this),d=!a._isSlideshowDisabled();d&&a.stop();!c.hasClass("focus")&&a._showItemAt(c.index());d&&a.start()})});this._reset();this.options.slideshow&&
this.start()}});(function(a){a.widget("gd.Pinned",{_windowDOM:a(window),_positionTop:0,_pinned:!1,_init:function(){var c=this,d=a("#wrapper"),e=a("#push"),i=a("footer");this._positionTop=this.element.position().top;this._windowDOM.bind("scroll",function(){var a=c.element.data("push-test"),a=c._positionTop<=c._windowDOM.scrollTop()&&(a?a():!0);if(c._pinned!==a){d.toggleClass("pin-pushed",a);c.element.toggleClass("pinned",a);var j=a?c.element.height():"0";d.css("top",j);e.css("height",j);i.css("height",
j);c._pinned=a}}).scroll()}})})($);(function(a){a.widget("gd.Slideshow",{_current:0,_timerDuration:18E3,_timerID:void 0,_paused:!1,_playing:!1,_controls:void 0,_buttonsDOM:void 0,_windowDOM:a(window),slideTo:function(a){var d=this,e=this.element.children(".slide");this._current=a%=e.size();this._controls.children().removeClass("focus").eq(a).addClass("focus");this.pause();this.element.animate({left:"-"+a*this._windowDOM.width(),leaveTransforms:!0,useTranslate3d:!0},1500,function(){d._playing&&d.resume()});
this._controls.children().eq(0).css("visibility",!a?"hidden":"visible")},previous:function(){this.slideTo(this._current-1)},next:function(){this.slideTo(this._current+1)},stop:function(){this._playing=!1;this.pause()},pause:function(){this._paused=!0;!this._playing&&this._buttonsDOM.children("img").attr("src",d.website.environment.STATIC_URL+"images/play.png");this._timerID&&window.clearInterval(this._timerID);this._timerID=null},resume:function(){var a=this;this._buttonsDOM.children("img").attr("src",
d.website.environment.STATIC_URL+"images/pause.png");this._paused=!1;if(!this._timerID)this._timerID=window.setInterval(function(){!a._paused&&a.next()},this._playing?this._timerDuration:0);this._playing=!0},_init:function(){var c=this;this._controls=a("#slides-control");this._buttonsDOM=a("#slideshow-control");this._controls.children("li").each(function(){var d=a(this);d.click(function(){c._controls.children(".focus").removeClass("focus");c.slideTo(d.index());d.addClass("focus")})});this.element.find("input").bind("focus",
function(){c._playing&&c.pause()}).bind("blur",function(){c._playing&&c.resume()});this._windowDOM.bind("resize",function(){c.element.animate({left:"-"+c._current*c._windowDOM.width(),leaveTransforms:!0,useTranslate3d:!0},1500)});a("#slideshow-control").click(function(){a(this);!c._playing||c._paused?c.resume():(c._playing=!1,c.pause())})}})})($);$.widget("gd.TabControl",{_onTabClick:function(a){if(!a.hasClass("focus")){var c=a.index();this.element.find(".tabs > li").removeClass("focus").eq(c).addClass("focus");
this._hidePanels();this._showPanelAt(c);this.element.attr("data-group")&&a.attr("data-name")&&this._broadcastClick(a.attr("data-name"))}},_broadcastClick:function(a){var c=this.element.attr("data-group");window.localStorage&&window.localStorage.setItem("tab-"+c,a);$(".tab-control[data-group='"+c+"']:not("+this.element.attr("id")+") .tabs > li[data-name='"+a+"']:not(.focus)").click()},_hidePanels:function(){this.element.children(".tab-panel").hide()},_showPanelAt:function(a){this._hidePanels();this.element.find(".tabs > li").removeClass("focus").eq(a).addClass("focus");
this.element.children(".tab-panel").eq(a).show()},reset:function(){this._hidePanels();this._showPanelAt(0)},_adjustLength:function(){var a=this.element.children("pre.tab-panel");if(!(2>a.size())){var c=d.website.base.stripUnit(a.eq(0).css("line-height")),h=0;a.each(function(){var a=$(this),c=(a.children("code:first").text()||"").match(/\n/g)||[];a.data("lines",c.length);h=Math.max(h,a.data("lines"))});a.each(function(){var a=$(this);if(a.data("lines")!==h){var i=d.website.base.stripUnit(a.css("padding-bottom")),
i=i+(h-a.data("lines"))*c;a.css("padding-bottom",i+"px")}})}},_init:function(){var a=this,c=this.element.attr("data-group"),d;c&&window.localStorage&&(d=window.localStorage.getItem("tab-"+c));this.element.addClass("tab-control");!this.element.attr("id")&&this.element.attr("id",(new Date).getTime());this.reset();this._adjustLength();this.element.find(".tabs > li").bind("click",function(c){c.preventDefault();a._onTabClick($(this))}).each(function(){var a=$(this);c&&d&&d===a.attr("data-name")&&a.click()})}})})();
